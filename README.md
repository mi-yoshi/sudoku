# sudoku
## sudoku solver

### 概要
以前から数独を解くプログラムを作成してみたかったので、Pythonで作成しました。  
自分で数独を解く時に、考えついた方法をロジックとして組み込み、それでも解けない場合に最後の手段として仮の番号を設定する方法を取っています。  
結果として、インターネットで公開されている超難題も解くことができました。  
作成してみると特に難しい所はなく、Pythonのいい練習問題でした。

### 前提とする実行環境
Pythonが動く環境
### 使用方法
問題をリストとして表現し、問題の空白は0で表現します。
sudoku_solver関数の引数に問題のリストを渡します。

```python
# (参照元) The hardest sudokus  Rating 99529
problem = [
 [1, 2, 0, 4, 0, 0, 3, 0, 0],
 [3, 0, 0, 0, 1, 0, 0, 5, 0],
 [0, 0, 6, 0, 0, 0, 1, 0, 0],
 [7, 0, 0, 0, 9, 0, 0, 0, 0],
 [0, 4, 0, 6, 0, 3, 0, 0, 0],
 [0, 0, 3, 0, 0, 2, 0, 0, 0],
 [5, 0, 0, 0, 8, 0, 7, 0, 0],
 [0, 0, 7, 0, 0, 0, 0, 0, 5],
 [0, 0, 0, 0, 0, 0, 0, 9, 8]]

sudoku_solver(problem)
```
実行結果  
ロジック別カウントは難問だとL3, L4が大きくなる傾向があります。特にL4が大きいと人が解くと膨大な時間がかかる可能性があります。
```
問題
[[1 2 0 4 0 0 3 0 0]
 [3 0 0 0 1 0 0 5 0]
 [0 0 6 0 0 0 1 0 0]
 [7 0 0 0 9 0 0 0 0]
 [0 4 0 6 0 3 0 0 0]
 [0 0 3 0 0 2 0 0 0]
 [5 0 0 0 8 0 7 0 0]
 [0 0 7 0 0 0 0 0 5]
 [0 0 0 0 0 0 0 9 8]]
** 成功 **
[[1 2 8 4 6 5 3 7 9]
 [3 7 4 2 1 9 8 5 6]
 [9 5 6 8 3 7 1 4 2]
 [7 6 5 1 9 8 4 2 3]
 [2 4 9 6 7 3 5 8 1]
 [8 1 3 5 4 2 9 6 7]
 [5 9 2 3 8 6 7 1 4]
 [4 8 7 9 2 1 6 3 5]
 [6 3 1 7 5 4 2 9 8]]
ロジック別カウント
  L1: セルの候補値が1個
  L2: 行,列,ブロック別に判定時に候補数字が1個のセルのみ
  L3_2: 行,列,ブロック別に判定時に候補値集合が2個のセルで同一かつ集合サイズが2
  L3_3: 行,列,ブロック別に判定時に候補値集合が3個のセルで同一かつ集合サイズが3
  L3_x: 同上,　ただし個数は4以上
  L4: 数字の仮置発生
{'L1': 4936, 'L2': 316, 'L3_2': 499, 'L3_3': 11, 'L3_x': 0, 'L4': 198}
```
### 処理概要 

- 制約単位: 行・列・3x3ブロック
- 制約:制約単位毎に１から9の数字がすべて入る
- 候補値表: 9x9のセル毎の候補値集合
- 処理内容:
    - (A)繰り返し処理(2,3は制約単位毎に処理)
      1. セルの候補値が1個なら値決定、制約に従い候補値表を更新
      2. 候補値に1回しか現れない数字があるなら、その値に決定
      3. 複数セルの候補値が同一かつセル数と候補値数が一致するなら、他のセルの候補値から削除
      4. 候補値表に変化がなければ、仮の値を設定して (A)を繰り返す(再帰処理)
